<!DOCTYPE html>
<!--
Copyright 2017 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->

<link rel="import" href="/dashboard/pinpoint/elements/new-job-dialog.html">

<dom-module id="new-page">
  <template>
    <new-job-dialog id="dialog" endpoint="/api/new"></new-job-dialog>
  </template>

  <script>
    'use strict';
    Polymer({
      is: 'new-page',

      ready() {
        this.$.dialog.addEventListener(
            'pinpoint-new-response', this.onJobCreated.bind(this));
      },

      onJobCreated(e) {
        this.set('absRoute.path', '../job/' + e.detail.jobId);
      },

      selected() {
        this.$.dialog.show();
      },

      deselected() {
        this.$.dialog.close();
      }
    });
  </script>
</dom-module>
