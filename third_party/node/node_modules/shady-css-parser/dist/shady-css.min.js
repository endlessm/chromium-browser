!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.common=n.exports}}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={whitespace:/\s/,whitespaceGreedy:/(\s+)/g,commentGreedy:/(\*\/)/g,boundary:/[\(\)\{\}'"@;:\s]/,stringBoundary:/['"]/},n={stylesheet:"stylesheet",comment:"comment",atRule:"atRule",ruleset:"ruleset",expression:"expression",declaration:"declaration",rulelist:"rulelist",discarded:"discarded"};e.matcher=t,e.nodeType=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","./common"],t);else if("undefined"!=typeof exports)t(exports,require("./common"));else{var n={exports:{}};t(n.exports,e.common),e.nodeFactory=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.NodeFactory=void 0;var r=function(){function e(){n(this,e)}return e.prototype.stylesheet=function(e){return{type:t.nodeType.stylesheet,rules:e}},e.prototype.atRule=function(e,n,r){return{type:t.nodeType.atRule,name:e,parameters:n,rulelist:r}},e.prototype.comment=function(e){return{type:t.nodeType.comment,value:e}},e.prototype.rulelist=function(e){return{type:t.nodeType.rulelist,rules:e}},e.prototype.ruleset=function(e,n){return{type:t.nodeType.ruleset,selector:e,rulelist:n}},e.prototype.declaration=function(e,n){return{type:t.nodeType.declaration,name:e,value:n}},e.prototype.expression=function(e){return{type:t.nodeType.expression,text:e}},e.prototype.discarded=function(e){return{type:t.nodeType.discarded,text:e}},e}();e.NodeFactory=r}),function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.nodeVisitor=n.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=Symbol("path"),o=function(){function e(){t(this,e),this[r]=[]}return e.prototype.visit=function(e){var t=void 0;return this[e.type]&&(this[r].push(e),t=this[e.type](e),this[r].pop()),t},n(e,[{key:"path",get:function(){return this[r]}}]),e}();e.NodeVisitor=o}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","./common","./node-visitor"],t);else if("undefined"!=typeof exports)t(exports,require("./common"),require("./node-visitor"));else{var n={exports:{}};t(n.exports,e.common,e.nodeVisitor),e.stringifier=n.exports}}(this,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.Stringifier=void 0;var s=function(e){function n(){return r(this,n),o(this,e.apply(this,arguments))}return i(n,e),n.prototype.stringify=function(e){return this.visit(e)||""},n.prototype[t.nodeType.stylesheet]=function(e){for(var t="",n=0;n<e.rules.length;++n)t+=this.visit(e.rules[n]);return t},n.prototype[t.nodeType.atRule]=function(e){return"@"+e.name+(e.parameters?" "+e.parameters:"")+(e.rulelist?""+this.visit(e.rulelist):";")},n.prototype[t.nodeType.rulelist]=function(e){for(var t="{",n=0;n<e.rules.length;++n)t+=this.visit(e.rules[n]);return t+"}"},n.prototype[t.nodeType.comment]=function(e){return""+e.value},n.prototype[t.nodeType.ruleset]=function(e){return""+e.selector+this.visit(e.rulelist)},n.prototype[t.nodeType.declaration]=function(e){return null!=e.value?e.name+":"+this.visit(e.value)+";":e.name+";"},n.prototype[t.nodeType.expression]=function(e){return""+e.text},n.prototype[t.nodeType.discarded]=function(e){return""},n}(n.NodeVisitor);e.Stringifier=s}),function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.token=n.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(n,r,o){t(this,e),this.type=n,this.start=r,this.end=o,this.previous=null,this.next=null}return e.prototype.is=function(e){return(this.type&e)===e},e}();n.type={none:0,whitespace:1,string:2,comment:4,word:8,boundary:16,propertyBoundary:32,openParenthesis:80,closeParenthesis:144,at:272,openBrace:528,closeBrace:1072,semicolon:2096,colon:4120};var r={"(":n.type.openParenthesis,")":n.type.closeParenthesis,":":n.type.colon,"@":n.type.at,"{":n.type.openBrace,"}":n.type.closeBrace,";":n.type.semicolon,"-":n.type.hyphen,_:n.type.underscore};e.Token=n,e.boundaryTokenTypes=r}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","./common","./token"],t);else if("undefined"!=typeof exports)t(exports,require("./common"),require("./token"));else{var n={exports:{}};t(n.exports,e.common,e.token),e.tokenizer=n.exports}}(this,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Tokenizer=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Symbol("currentToken"),s=Symbol("cursorToken"),u=Symbol("getNextToken"),c=function(){function e(t){r(this,e),this.cssText=t,this[s]=new n.Token(n.Token.type.none,0,0),this[i]=null}return e.prototype.advance=function(){var e=void 0;return null!=this[i]?(e=this[i],this[i]=null):e=this[u](),e},e.prototype.slice=function(e,t){return t=t||e,this.cssText.substring(e.start,t.end)},e.prototype.flush=function(){for(var e=[];this.currentToken;)e.push(this.advance());return e},e.prototype[u]=function(){var e=this.cssText[this.offset],n=void 0;return this[i]=null,this.offset>=this.cssText.length?null:(n=t.matcher.whitespace.test(e)?this.tokenizeWhitespace(this.offset):t.matcher.stringBoundary.test(e)?this.tokenizeString(this.offset):"/"===e&&"*"===this.cssText[this.offset+1]?this.tokenizeComment(this.offset):t.matcher.boundary.test(e)?this.tokenizeBoundary(this.offset):this.tokenizeWord(this.offset),n.previous=this[s],this[s].next=n,this[s]=n,n)},e.prototype.tokenizeString=function(e){for(var t=this.cssText[e],r=!1,o=e,i=void 0;i=this.cssText[++e];)if(r)r=!1;else{if(i===t){++e;break}"\\"===i&&(r=!0)}return new n.Token(n.Token.type.string,o,e)},e.prototype.tokenizeWord=function(e){for(var r=e,o=void 0;(o=this.cssText[e])&&!t.matcher.boundary.test(o);)e++;return new n.Token(n.Token.type.word,r,e)},e.prototype.tokenizeWhitespace=function(e){var r=e;t.matcher.whitespaceGreedy.lastIndex=e;var o=t.matcher.whitespaceGreedy.exec(this.cssText);return null!=o&&o.index===e&&(e=t.matcher.whitespaceGreedy.lastIndex),new n.Token(n.Token.type.whitespace,r,e)},e.prototype.tokenizeComment=function(e){var r=e;t.matcher.commentGreedy.lastIndex=e;var o=t.matcher.commentGreedy.exec(this.cssText);return e=null==o?this.cssText.length:t.matcher.commentGreedy.lastIndex,new n.Token(n.Token.type.comment,r,e)},e.prototype.tokenizeBoundary=function(e){var t=n.boundaryTokenTypes[this.cssText[e]]||n.Token.type.boundary;return new n.Token(t,e,e+1)},o(e,[{key:"offset",get:function(){return this[s].end}},{key:"currentToken",get:function(){return null==this[i]&&(this[i]=this[u]()),this[i]}}]),e}();e.Tokenizer=c}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","./tokenizer","./token","./node-factory"],t);else if("undefined"!=typeof exports)t(exports,require("./tokenizer"),require("./token"),require("./node-factory"));else{var n={exports:{}};t(n.exports,e.tokenizer,e.token,e.nodeFactory),e.parser=n.exports}}(this,function(e,t,n,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var i=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?new r.NodeFactory:arguments[0];o(this,e),this.nodeFactory=t}return e.prototype.parse=function(e){return this.parseStylesheet(new t.Tokenizer(e))},e.prototype.parseStylesheet=function(e){return this.nodeFactory.stylesheet(this.parseRules(e))},e.prototype.parseRules=function(e){for(var t=[];e.currentToken;){var n=this.parseRule(e);n&&t.push(n)}return t},e.prototype.parseRule=function(e){return e.currentToken.is(n.Token.type.whitespace)?(e.advance(),null):e.currentToken.is(n.Token.type.comment)?this.parseComment(e):e.currentToken.is(n.Token.type.word)?this.parseDeclarationOrRuleset(e):e.currentToken.is(n.Token.type.propertyBoundary)?this.parseUnknown(e):e.currentToken.is(n.Token.type.at)?this.parseAtRule(e):this.parseUnknown(e)},e.prototype.parseComment=function(e){return this.nodeFactory.comment(e.slice(e.advance()))},e.prototype.parseUnknown=function(e){for(var t=e.advance(),r=void 0;e.currentToken&&e.currentToken.is(n.Token.type.boundary);)r=e.advance();return this.nodeFactory.discarded(e.slice(t,r))},e.prototype.parseAtRule=function(e){for(var t="",r=null,o=null,i=null;e.currentToken;)if(e.currentToken.is(n.Token.type.whitespace))e.advance();else if(!t&&e.currentToken.is(n.Token.type.at)){e.advance();for(var s=e.currentToken,u=void 0;e.currentToken&&e.currentToken.is(n.Token.type.word);)u=e.advance();t=e.slice(s,u)}else{if(e.currentToken.is(n.Token.type.openBrace)){r=this.parseRulelist(e);break}if(e.currentToken.is(n.Token.type.propertyBoundary)){e.advance();break}null==o?o=e.advance():i=e.advance()}return this.nodeFactory.atRule(t,o?e.slice(o,i):"",r)},e.prototype.parseRulelist=function(e){var t=[];for(e.advance();e.currentToken;){if(e.currentToken.is(n.Token.type.closeBrace)){e.advance();break}var r=this.parseRule(e);r&&t.push(r)}return this.nodeFactory.rulelist(t)},e.prototype.parseDeclarationOrRuleset=function(e){for(var t=null,r=null,o=null;e.currentToken;)if(e.currentToken.is(n.Token.type.whitespace))e.advance();else if(e.currentToken.is(n.Token.type.openParenthesis))for(;e.currentToken&&!e.currentToken.is(n.Token.type.closeParenthesis);)e.advance();else{if(e.currentToken.is(n.Token.type.openBrace)||e.currentToken.is(n.Token.type.propertyBoundary))break;e.currentToken.is(n.Token.type.colon)&&(o=e.currentToken),t?r=e.advance():(t=e.advance(),r=t)}if(e.currentToken.is(n.Token.type.propertyBoundary)){var i=e.slice(t,o?o.previous:r),s=o&&e.slice(o.next,r).trim();return e.currentToken.is(n.Token.type.semicolon)&&e.advance(),this.nodeFactory.declaration(i,s&&this.nodeFactory.expression(s))}if(o&&o===r){var u=this.parseRulelist(e);return e.currentToken.is(n.Token.type.semicolon)&&e.advance(),this.nodeFactory.declaration(e.slice(t,r.previous),u)}return this.nodeFactory.ruleset(e.slice(t,r),this.parseRulelist(e))},e}();e.Parser=i}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","./shady-css/common","./shady-css/token","./shady-css/tokenizer","./shady-css/node-factory","./shady-css/node-visitor","./shady-css/stringifier","./shady-css/parser"],t);else if("undefined"!=typeof exports)t(exports,require("./shady-css/common"),require("./shady-css/token"),require("./shady-css/tokenizer"),require("./shady-css/node-factory"),require("./shady-css/node-visitor"),require("./shady-css/stringifier"),require("./shady-css/parser"));else{var n={exports:{}};t(n.exports,e.common,e.token,e.tokenizer,e.nodeFactory,e.nodeVisitor,e.stringifier,e.parser),e.shadyCss=n.exports}}(this,function(e,t,n,r,o,i,s,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"nodeType",{enumerable:!0,get:function(){return t.nodeType}}),Object.defineProperty(e,"Token",{enumerable:!0,get:function(){return n.Token}}),Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return r.Tokenizer}}),Object.defineProperty(e,"NodeFactory",{enumerable:!0,get:function(){return o.NodeFactory}}),Object.defineProperty(e,"NodeVisitor",{enumerable:!0,get:function(){return i.NodeVisitor}}),Object.defineProperty(e,"Stringifier",{enumerable:!0,get:function(){return s.Stringifier}}),Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return u.Parser}})});