{"version":3,"sources":["typescript/typescript-import-scanner.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;GAYG;;;;;;;;;;AAGH,6BAA0C;AAE1C,0CAA0D;AAG1D,+DAA8E;AAE9E;IAEQ,IAAI,CACN,QAAkC,EAClC,KAA0C;;YAC5C,MAAM,OAAO,GAAoB,EAAE,CAAC;YACpC,mBAAoB,SAAQ,6BAAO;gBACjC,sBAAsB,CAAC,IAAuB;oBAC5C,iEAAiE;oBACjE,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,CAAC;oBACvD,2DAA2D;oBAC3D,MAAM,YAAY,GACd,eAAe,CAAC,SAAS,CAAC,CAAC,EAAE,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAC7D,MAAM,SAAS,GAAG,aAAU,CAAC,QAAQ,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC;oBACzD,OAAO,CAAC,IAAI,CAAC,IAAI,qBAAa,CAC1B,WAAW,EACX,SAAS;oBACT,8CAA8C;oBAC9C,IAA0B,EAC1B,IAA0B,EAC1B,IAAI,EACJ,KAAK,CAAC,CAAC,CAAC;gBACd,CAAC;aACF;YACD,MAAM,OAAO,GAAG,IAAI,aAAa,EAAE,CAAC;YACpC,MAAM,KAAK,CAAC,OAAO,CAAC,CAAC;YACrB,MAAM,CAAC,EAAC,QAAQ,EAAE,OAAO,EAAC,CAAC;QAC7B,CAAC;KAAA;CACF;AA5BD,0DA4BC","file":"typescript-import-scanner.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nimport {ImportDeclaration} from 'typescript';\nimport {resolve as resolveUrl} from 'url';\n\nimport {ScannedImport, SourceRange} from '../model/model';\nimport {Scanner} from '../scanning/scanner';\n\nimport {Node, ParsedTypeScriptDocument, Visitor} from './typescript-document';\n\nexport class TypeScriptImportScanner implements\n    Scanner<ParsedTypeScriptDocument, Node, Visitor> {\n  async scan(\n      document: ParsedTypeScriptDocument,\n      visit: (visitor: Visitor) => Promise<void>) {\n    const imports: ScannedImport[] = [];\n    class ImportVisitor extends Visitor {\n      visitImportDeclaration(node: ImportDeclaration): void { /* */\n        // If getText() throws it's because it requires parent references\n        const moduleSpecifier = node.moduleSpecifier.getText();\n        // The specifier includes the quote characters, remove them\n        const specifierUrl =\n            moduleSpecifier.substring(1, moduleSpecifier.length - 1);\n        const importUrl = resolveUrl(document.url, specifierUrl);\n        imports.push(new ScannedImport(\n            'js-import',\n            importUrl,\n            // TODO(justinfagnani): make SourceRanges work\n            null as any as SourceRange,\n            null as any as SourceRange,\n            node,\n            false));\n      }\n    }\n    const visitor = new ImportVisitor();\n    await visit(visitor);\n    return {features: imports};\n  }\n}\n"]}